<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>在Centos环境安装Jenkins</title>
      <link href="/diary/2021/12/08/%E6%9C%AA%E5%BD%92%E7%B1%BB/%E5%9C%A8Centos%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85Jenkins/"/>
      <url>/diary/2021/12/08/%E6%9C%AA%E5%BD%92%E7%B1%BB/%E5%9C%A8Centos%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85Jenkins/</url>
      
        <content type="html"><![CDATA[<p>按以下步骤进行操作，操作环境Centos8.4，启动后，默认的端口号为8080，使用<a href="http://ip:8080/">http://IP:8080</a> 即可访问进行初始化设置。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install java-1.8.0-openjdk</span><br><span class="line"></span><br><span class="line">sudo wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo</span><br><span class="line"></span><br><span class="line">sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key</span><br><span class="line"></span><br><span class="line">sudo dnf install jenkins</span><br><span class="line"></span><br><span class="line">sudo systemctl start jenkins</span><br><span class="line"></span><br><span class="line">sudo systemctl enable jenkins</span><br><span class="line"></span><br><span class="line">systemctl status jenkins</span><br><span class="line"></span><br><span class="line">配置文件地址</span><br><span class="line">/etc/sysconfig/jenkins</span><br><span class="line"></span><br><span class="line">安装家目录</span><br><span class="line">JENKINS_HOME=/var/lib/jenkins</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 未归类 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>linux常见问题</title>
      <link href="/diary/2021/12/08/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/Linux%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
      <url>/diary/2021/12/08/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/Linux%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>1.env 获取所有环境变量 值为key=value列表</p>]]></content>
      
      
      <categories>
          
          <category> 常见问题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker常见问题</title>
      <link href="/diary/2021/12/08/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/Docker%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
      <url>/diary/2021/12/08/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/Docker%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h4 id="docker-–privileged-true-参数作用"><a href="#docker-–privileged-true-参数作用" class="headerlink" title="docker –privileged=true 参数作用"></a>docker –privileged=true 参数作用</h4><p>简单来说，就是增加容器的扩展特权，docker将允许访问主机上的所有设备。使用该参数，container内的root拥有真正的root权限，否则，container内的root只是外部的一个普通用户权限。</p><h4 id="容器执行sh文件无权限-sh-Permission-denied"><a href="#容器执行sh文件无权限-sh-Permission-denied" class="headerlink" title="容器执行sh文件无权限 sh: Permission denied"></a>容器执行sh文件无权限 sh: Permission denied</h4><p>在Dockerfile中添加如下代码。USER帮助你切换到指定用户而已，改变之后以此身份执行 <code>RUN</code>, <code>CMD</code> 以及 <code>ENTRYPOINT</code> 命令。Chmod用来给文件读写执行权限。</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">USER</span> root</span><br><span class="line">chmod <span class="number">0755</span> 文件</span><br></pre></td></tr></table></figure><h4 id="Docker-ps显示完整容器相关信息"><a href="#Docker-ps显示完整容器相关信息" class="headerlink" title="Docker ps显示完整容器相关信息"></a>Docker ps显示完整容器相关信息</h4><p>通过下面的命令获取所有容器的相关信息，一般COMMAND会被遮挡，用此命令可以看到完整的信息。</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a --no-trunc</span><br><span class="line"></span><br><span class="line">a213efc42bd6   threecat/dsc:api   <span class="string">&quot;/bin/sh -c &#x27;sh /go/bin/start.sh $&#123;RUN_MODE&#125;&#x27;&quot;</span>   <span class="number">44</span> hours ago   Up <span class="number">8</span> hours   <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8082</span>-&gt;<span class="number">80</span>/tcp     dsc-api</span><br><span class="line"></span><br><span class="line"><span class="number">65</span>a8296880e4   <span class="number">3</span>f06de256c3c       <span class="string">&quot;docker-php-entrypoint php-fpm -F&quot;</span>               <span class="number">3</span> weeks ago    Up <span class="number">8</span> hours   <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">9000</span>-&gt;<span class="number">9000</span>/tcp   mod-public</span><br></pre></td></tr></table></figure><h4 id="Dockerfile中CMD无法获取build-arg构建传递的数据"><a href="#Dockerfile中CMD无法获取build-arg构建传递的数据" class="headerlink" title="Dockerfile中CMD无法获取build-arg构建传递的数据"></a>Dockerfile中CMD无法获取build-arg构建传递的数据</h4><p>Arg数据只能在构建时使用，而CMD在运行容器时执行。想要实现的方法是在Dockerfile中使用ENV设置环境变量，运行容器的时候执行sh脚本，去读取环境变量即可。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">FROM alpine:latest</span><br><span class="line"></span><br><span class="line">ARG MOD=api</span><br><span class="line"></span><br><span class="line">ENV RUN_MODE $&#123;MOD&#125;</span><br><span class="line"></span><br><span class="line">CMD sh /go/bin/start.sh $&#123;RUN_MODE&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 常见问题 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
